<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fdproject.mapper.RecipeMapper">

	<sql id="recipeColumns">
		<![CDATA[
		recipe_No,
		disease_Field,
		title,
		writer,
		food_Ingredients,
		step,
		img_File,
		reg_Date,
		hit,
		recommended_Number,
		delete_Yn
		]]>
	</sql>
	 
	<!-- new -->
	<select id ="selectRecipeList" resultType="RecipeDTO">
		<include refid="CommonMapper.pagingHeader"/>
		SELECT 
			<include refid="recipeColumns" />							
		FROM 
		recipes
		where
		1=1
		<include refid="CommonMapper.search_R"/>
		order by title asc
		<include refid="CommonMapper.pagingFooter"/>						
	</select>
	
	 <select id="selectRecipeTotalCount" parameterType="RecipeDTO" resultType="int">
        <![CDATA[
        	SELECT
	        COUNT(*)
	        FROM
	        recipes
	        where
	        1=1
	    ]]>
	    <include refid="CommonMapper.search_R"/>
    </select>       
	
	 <select id = "selectRecipeInfo" parameterType = "String" resultType = "RecipeDTO">
	 	SELECT
	 		<include refid="recipeColumns" />
	 	FROM recipes
	 	
	 	WHERE Recipe_no = #{Recipe_no}	 	
	</select>
	
	<select id = "UpdateUphit" parameterType = "String" resultType = "Integer">
		UPDATE recipes	 		
		
	 	SET hit = hit + 1    
	 	
	 	WHERE Recipe_no = #{Recipe_no}			
	</select>
	
	
	
	
</mapper>